
package ec.edu.espe.evsustore.view;
import com.mongodb.client.MongoCollection;
import com.mongodb.client.MongoDatabase;
import ec.edu.espe.evsustore.controller.DatabaseController;
import ec.edu.espe.evsustore.model.HardwareComponent;
import ec.edu.espe.evsustore.utils.DatabaseManager;
import java.util.ArrayList;
import javax.swing.DefaultListModel;
import org.bson.Document;

/**
 *
 * @author Joan Cobe√±a, KillChain, DCCO-ESPE
 */
public class PnelViewInfo extends javax.swing.JPanel {

    private DefaultListModel componentsListModel;
    
    public PnelViewInfo(DatabaseController database) {
        initComponents();
        
        
        writeLstComponents(database);
    }
    
    

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        pnlViewInfo = new javax.swing.JPanel();
        scrollPnelComponentsList = new javax.swing.JScrollPane();
        lstComponents = new javax.swing.JList<>();

        pnlViewInfo.setBackground(new java.awt.Color(18, 9, 24));
        pnlViewInfo.setForeground(new java.awt.Color(18, 9, 24));

        lstComponents.setFont(new java.awt.Font("Serif", 0, 14)); // NOI18N
        lstComponents.setForeground(new java.awt.Color(60, 63, 65));
        lstComponents.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);
        scrollPnelComponentsList.setViewportView(lstComponents);

        javax.swing.GroupLayout pnlViewInfoLayout = new javax.swing.GroupLayout(pnlViewInfo);
        pnlViewInfo.setLayout(pnlViewInfoLayout);
        pnlViewInfoLayout.setHorizontalGroup(
            pnlViewInfoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlViewInfoLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(scrollPnelComponentsList, javax.swing.GroupLayout.DEFAULT_SIZE, 613, Short.MAX_VALUE)
                .addContainerGap())
        );
        pnlViewInfoLayout.setVerticalGroup(
            pnlViewInfoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlViewInfoLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(scrollPnelComponentsList, javax.swing.GroupLayout.DEFAULT_SIZE, 488, Short.MAX_VALUE)
                .addContainerGap())
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(pnlViewInfo, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(pnlViewInfo, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
    }// </editor-fold>//GEN-END:initComponents
    
    private void writeLstComponents(DatabaseController database){
        
        componentsListModel = new DefaultListModel<> ();
        ArrayList<HardwareComponent> componentsInDB = database.obatinAllComponents();
        
        String componentModel;
        int i = lstComponents.getModel().getSize();
        
        for(HardwareComponent component: componentsInDB){
            componentModel = component.toString();
            componentsListModel.add(i, componentModel);
            i++;
        }
        
        lstComponents.setModel(componentsListModel);
        
    }
    
    private HardwareComponent obtainSelectedComponent(DatabaseController database){
        
        String componentModel = lstComponents.getSelectedValue();
        int id = getIdOfComponentModel(componentModel);
        HardwareComponent selectedComponent = database.obatinComponent(id);
        
        return selectedComponent;
    }
    
    private int getIdOfComponentModel(String componentModel){
        lstComponents.getSelectedValue();
        
        //TODO
        
        
        return 0;
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JList<String> lstComponents;
    private javax.swing.JPanel pnlViewInfo;
    private javax.swing.JScrollPane scrollPnelComponentsList;
    // End of variables declaration//GEN-END:variables
}
